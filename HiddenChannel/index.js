(function(d,s,a,c,g,E){"use strict";const{View:P,Text:f,Pressable:m}=s.findByProps("Button","Text","View"),h=s.findByProps("extractTimestamp"),l=a.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:a.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:g.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:g.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function u(t){let{date:e}=t;return React.createElement(m,{style:l.dateContainer,onPress:function(){a.toasts.open({content:a.moment(e).toLocaleString(),source:E.getAssetByName("clock").id})},onLongPress:function(){a.clipboard.setString(e.getTime().toString()),a.toasts.open({content:"Copied to clipboard"})}},React.createElement(f,{style:l.text},a.moment(e).fromNow()))}function T(t){let{channel:e}=t;return React.createElement(P,{style:l.container},React.createElement(f,{style:l.title},"This channel is hidden."),React.createElement(f,{style:l.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(u,{date:new Date(h.extractTimestamp(e.id))}),`

`,"Last message: ",e.lMsg?React.createElement(u,{date:new Date(h.extractTimestamp(e.lMsg))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(u,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let o=[];const C=s.findByProps("getChannelPermissions","can"),S=s.findByProps("transitionToGuild"),x=s.findByProps("stores","fetchMessages"),{ChannelTypes:p}=s.findByProps("ChannelTypes"),{getChannel:R}=s.findByProps("getChannel"),B=s.findByStoreName("ReadStateStore");s.findByStoreName("ChannelStore");const M=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function r(t){if(t==null||(typeof t=="string"&&(t=R(t)),!t||M.includes(t.type)))return!1;t.realCheck=!0;let e=!C.can(a.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,e}function N(){console.log("HiddenChannel loaded 4.3");const t=s.findByName("MessagesWrapperConnected",!1);o.push(c.instead("hasUnread",B,function(e,n){const i=R(e[0]);return r(i)?!1:n(e)})),o.push(c.after("can",C,function(e,n){let[i,y]=e;return!y?.realCheck&&i===a.constants.Permissions.VIEW_CHANNEL?!0:n})),o.push(c.instead("transitionToGuild",S,function(e,n){const[i,y]=e;!r(y)&&typeof n=="function"&&n(e)})),o.push(c.instead("fetchMessages",x,function(e,n){const[i]=e;!r(i)&&typeof n=="function"&&n(e)})),o.push(c.instead("default",t,function(e,n){const i=e[0]?.channel;return!r(i)&&typeof n=="function"?n(...e):a.React.createElement(T,{channel:i})}))}var A={onLoad:N,onUnload:function(){for(const t of o)t()}};return d.default=A,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
