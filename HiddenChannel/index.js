(function(f,i,n,r,h,P){"use strict";const{View:R,Text:u,Pressable:M}=i.findByProps("Button","Text","View"),E=i.findByProps("extractTimestamp"),l=n.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function p(t){let{date:e}=t;return React.createElement(M,{style:l.dateContainer,onPress:function(){n.toasts.open({content:n.moment(e).toLocaleString(),source:P.getAssetByName("clock").id})},onLongPress:function(){n.clipboard.setString(e.getTime().toString()),n.toasts.open({content:"Copied to clipboard"})}},React.createElement(u,{style:l.text},n.moment(e).fromNow()))}function T(t){let{channel:e}=t;return React.createElement(R,{style:l.container},React.createElement(u,{style:l.title},"This channel is hidden."),React.createElement(u,{style:l.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(p,{date:new Date(E.extractTimestamp(e.id))}),`

`,"Last message: ",e.lMsgId?React.createElement(p,{date:new Date(E.extractTimestamp(e.lMsgId))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(p,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let c=[];const C=i.findByProps("getChannelPermissions","can"),m=i.findByProps("transitionToGuild"),I=i.findByProps("stores","fetchMessages"),{ChannelTypes:g}=i.findByProps("ChannelTypes"),{getChannel:x}=i.findByProps("getChannel"),A=[g.DM,g.GROUP_DM,g.GUILD_CATEGORY],y=new Map;function d(t){if(t==null||(typeof t=="string"&&(t=x(t)),!t||A.includes(t.type)))return!1;t.realCheck=!0;let e=!C.can(n.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,e}function N(){console.log("HiddenChannel loaded 1.5");const t=i.findByName("MessagesWrapperConnected",!1);c.push(r.after("can",C,function(e,s){let[o,a]=e;return o==n.constants.Permissions.VIEW_CHANNEL&&d(a)&&(y.get(a.id)==null&&(y.set(a.id,a.lastMessageId),a.lMsgId=y.get(a.id)),a.lastMessageId=void 0),!a?.realCheck&&o===n.constants.Permissions.VIEW_CHANNEL?!0:s})),c.push(r.instead("transitionToGuild",m,function(e,s){const[o,a]=e;!d(a)&&typeof s=="function"&&s(e)})),c.push(r.instead("fetchMessages",I,function(e,s){const[o]=e;!d(o)&&typeof s=="function"&&s(e)})),c.push(r.instead("default",t,function(e,s){const o=e[0]?.channel;return!d(o)&&typeof s=="function"?s(...e):(console.log("Showing hidden channel stuff"),n.React.createElement(T,{channel:o}))}))}var B={onLoad:N,onUnload:function(){for(const t of c)t()}};return f.default=B,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
