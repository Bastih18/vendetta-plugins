(function(c,s,n,r,p,C){"use strict";const{View:E,Text:d,Pressable:P}=s.findByProps("Button","Text","View"),g=s.findByProps("extractTimestamp"),o=n.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:p.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:p.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function f(t){let{date:e}=t;return React.createElement(P,{style:o.dateContainer,onPress:function(){n.toasts.open({content:n.moment(e).toLocaleString(),source:C.getAssetByName("clock").id})},onLongPress:function(){n.clipboard.setString(e.getTime().toString()),n.toasts.open({content:"Copied to clipboard"})}},React.createElement(d,{style:o.text},n.moment(e).fromNow()))}function R(t){let{channel:e}=t;return React.createElement(E,{style:o.container},React.createElement(d,{style:o.title},"This channel is hidden."),React.createElement(d,{style:o.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(f,{date:new Date(g.extractTimestamp(e.id))}),`

`,"Last message: ",e.lastMessageId?React.createElement(f,{date:new Date(g.extractTimestamp(e.lastMessageId))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(f,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let l=[];const h=s.findByProps("getChannelPermissions","can");s.findByProps("transitionToGuild");const m=s.findByProps("stores","fetchMessages"),{ChannelTypes:u}=s.findByProps("ChannelTypes"),{getChannel:T}=s.findByProps("getChannel"),x=[u.DM,u.GROUP_DM,u.GUILD_CATEGORY];function y(t){if(t==null||(typeof t=="string"&&(t=T(t)),!t||x.includes(t.type)))return!1;t.realCheck=!0;let e=!h.can(n.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,e}function M(){console.log("HiddenChannel loaded");const t=s.findByName("MessagesWrapperConnected",!1);l.push(r.after("can",h,function(e,a){let[i,B]=e;return!B?.realCheck&&i===n.constants.Permissions.VIEW_CHANNEL?!0:a})),l.push(r.instead("fetchMessages",m,function(e,a){const[i]=e;!y(i)&&typeof a=="function"&&a(e)})),l.push(r.instead("default",t,function(e,a){const i=e[0]?.channel;return!y(i)&&typeof a=="function"?a(...e):(console.log("Showing hidden channel stuff"),n.React.createElement(R,{channel:i}))}))}var A={onLoad:M,onUnload:function(){for(const t of l)t()}};return c.default=A,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
