(function(d,a,s,l,h,C){"use strict";const{View:E,Text:f,Pressable:M}=a.findByProps("Button","Text","View"),P=a.findByProps("extractTimestamp"),c=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function u(t){let{date:e}=t;return React.createElement(M,{style:c.dateContainer,onPress:function(){s.toasts.open({content:s.moment(e).toLocaleString(),source:C.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(e.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(f,{style:c.text},s.moment(e).fromNow()))}function m(t){let{channel:e}=t;return React.createElement(E,{style:c.container},React.createElement(f,{style:c.title},"This channel is hidden."),React.createElement(f,{style:c.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(u,{date:new Date(P.extractTimestamp(e.id))}),`

`,"Last message: ",e.lMsg?React.createElement(u,{date:new Date(P.extractTimestamp(e.lMsg))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(u,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let o=[];const R=a.findByProps("getChannelPermissions","can"),T=a.findByProps("transitionToGuild"),x=a.findByProps("stores","fetchMessages"),{ChannelTypes:g}=a.findByProps("ChannelTypes"),{getChannel:p}=a.findByProps("getChannel"),I=a.findByStoreName("ReadStateStore"),B=[g.DM,g.GROUP_DM,g.GUILD_CATEGORY];function r(t){if(t==null||(typeof t=="string"&&(t=p(t)),!t||B.includes(t.type)))return!1;t.realCheck=!0;let e=!R.can(s.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,e}function N(t){r(t)&&((t.lMsg==null||t.lMsg!=t.lastMessageId)&&t.lastMessageId!=null&&(t.lMsg=t.lastMessageId),t.lastMessageId=void 0)}function S(){console.log("HiddenChannel loaded 3.9");const t=a.findByName("MessagesWrapperConnected",!1);o.push(l.instead("hasUnread",I,function(e,n){return r(e[0])?(console.log(p(e[0])),N(p(e[0])),!1):n(e)})),o.push(l.after("can",R,function(e,n){let[i,y]=e;return!y?.realCheck&&i===s.constants.Permissions.VIEW_CHANNEL?!0:n})),o.push(l.instead("transitionToGuild",T,function(e,n){const[i,y]=e;!r(y)&&typeof n=="function"&&n(e)})),o.push(l.instead("fetchMessages",x,function(e,n){const[i]=e;!r(i)&&typeof n=="function"&&n(e)})),o.push(l.instead("default",t,function(e,n){const i=e[0]?.channel;return!r(i)&&typeof n=="function"?n(...e):s.React.createElement(m,{channel:i})}))}var A={onLoad:S,onUnload:function(){for(const t of o)t()}};return d.default=A,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
