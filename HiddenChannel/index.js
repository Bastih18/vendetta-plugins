(function(f,s,i,l,y,E){"use strict";const{View:m,Text:u,Pressable:T}=s.findByProps("Button","Text","View"),C=s.findByProps("extractTimestamp"),r=i.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:i.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:y.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:y.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function g(e){let{date:t}=e;return React.createElement(T,{style:r.dateContainer,onPress:function(){i.toasts.open({content:i.moment(t).toLocaleString(),source:E.getAssetByName("clock").id})},onLongPress:function(){i.clipboard.setString(t.getTime().toString()),i.toasts.open({content:"Copied to clipboard"})}},React.createElement(u,{style:r.text},i.moment(t).fromNow()))}function S(e){let{channel:t}=e;return React.createElement(m,{style:r.container},React.createElement(u,{style:r.title},"This channel is hidden."),React.createElement(u,{style:r.text},"Topic: ",t.topic||"No topic.",`

`,"Creation date: ",React.createElement(g,{date:new Date(C.extractTimestamp(t.id))}),`

`,"Last message: ",t.lMsg?React.createElement(g,{date:new Date(C.extractTimestamp(t.lMsg))}):"No messages.",`

`,"Last pin: ",t.lastPinTimestamp?React.createElement(g,{date:new Date(t.lastPinTimestamp)}):"No pins."))}let c=[];const P=s.findByProps("getChannelPermissions","can"),_=s.findByProps("transitionToGuild"),B=s.findByProps("stores","fetchMessages"),{ChannelTypes:h}=s.findByProps("ChannelTypes"),{getChannel:D}=s.findByProps("getChannel"),R=s.findByStoreName("ReadStateStore"),x=s.findByStoreName("ChannelStore"),M=[h.DM,h.GROUP_DM,h.GUILD_CATEGORY];function d(e){if(e==null||(typeof e=="string"&&(e=D(e)),!e||M.includes(e.type)))return!1;e.realCheck=!0;let t=!P.can(i.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,t}function N(){console.log("HiddenChannel loaded 4.1");const e=s.findByName("MessagesWrapperConnected",!1);console.log("Patch getForDebugging");const t=l.after("getForDebugging",R,function(a,n){return console.log("HiddenChannel: Patching channel overrides"),c.push(l.before("canBeUnread",n.__proto__,function(){if(d(this.channelId))return!1})),t(),n});console.log("HiddenChannel: Patching channel overrides done"),R.getForDebugging(Object.keys(x.__getLocalVars().guildChannels)[0]),c.push(l.after("can",P,function(a,n){let[o,p]=a;return!p?.realCheck&&o===i.constants.Permissions.VIEW_CHANNEL?!0:n})),c.push(l.instead("transitionToGuild",_,function(a,n){const[o,p]=a;!d(p)&&typeof n=="function"&&n(a)})),c.push(l.instead("fetchMessages",B,function(a,n){const[o]=a;!d(o)&&typeof n=="function"&&n(a)})),c.push(l.instead("default",e,function(a,n){const o=a[0]?.channel;return!d(o)&&typeof n=="function"?n(...a):i.React.createElement(S,{channel:o})}))}var A={onLoad:N,onUnload:function(){for(const e of c)e()}};return f.default=A,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
