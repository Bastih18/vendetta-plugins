(function(r,i,l,d,p,C){"use strict";const{View:I,Text:g,Pressable:P}=i.findByProps("Button","Text","View"),y=i.findByProps("extractTimestamp"),o=l.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:l.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:p.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:p.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function f(n){let{date:e}=n;return React.createElement(P,{style:o.dateContainer,onPress:function(){l.toasts.open({content:l.moment(e).toLocaleString(),source:C.getAssetByName("clock").id})},onLongPress:function(){l.clipboard.setString(e.getTime().toString()),l.toasts.open({content:"Copied to clipboard"})}},React.createElement(g,{style:o.text},l.moment(e).fromNow()))}function R(n){let{channel:e}=n;return React.createElement(I,{style:o.container},React.createElement(g,{style:o.title},"This channel is hidden."),React.createElement(g,{style:o.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(f,{date:new Date(y.extractTimestamp(e.id))}),`

`,"Last message: ",e.lMsg?React.createElement(f,{date:new Date(y.extractTimestamp(e.lMsg))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(f,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let c=[];const h=i.findByProps("getChannelPermissions","can"),E=i.findByProps("transitionToGuild"),m=i.findByProps("stores","fetchMessages"),{ChannelTypes:u}=i.findByProps("ChannelTypes"),{getChannel:T}=i.findByProps("getChannel"),x=[u.DM,u.GROUP_DM,u.GUILD_CATEGORY];function M(n){if(n==null||(typeof n=="string"&&(n=T(n)),!n||x.includes(n.type)))return!1;n.realCheck=!0;let e=!h.can(l.constants.Permissions.VIEW_CHANNEL,n);return delete n.realCheck,e}function v(){console.log("HiddenChannel loaded 2.0");const n=i.findByName("MessagesWrapperConnected",!1);c.push(d.after("can",h,function(e,a){let[t,s]=e;return!s?.realCheck&&t===l.constants.Permissions.VIEW_CHANNEL?((s.lMsg==null||s.lMsg!=s.lastMessageId)&&(s.lMsg=s.lastMessageId),s.lastMessageId=void 0,s.id=="933799544737656952"&&console.log("HiddenChannel: can",a),!0):a})),c.push(d.instead("transitionToGuild",E,function(e,a){const[t,s]=e;(s.lMsg==null||s.lMsg!=s.lastMessageId)&&(s.lMsg=s.lastMessageId),s.lastMessageId=void 0,!M(s)&&typeof a=="function"&&a(e)})),c.push(d.instead("fetchMessages",m,function(e,a){const[t]=e;(t.lMsg==null||t.lMsg!=t.lastMessageId)&&(t.lMsg=t.lastMessageId),t.lastMessageId=void 0,!M(t)&&typeof a=="function"&&a(e)})),c.push(d.instead("default",n,function(e,a){const t=e[0]?.channel;return(t.lMsg==null||t.lMsg!=t.lastMessageId)&&(t.lMsg=t.lastMessageId),t.lastMessageId=void 0,!M(t)&&typeof a=="function"?a(...e):l.React.createElement(R,{channel:t})}))}var A={onLoad:v,onUnload:function(){for(const n of c)n()}};return r.default=A,Object.defineProperty(r,"__esModule",{value:!0}),r})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
