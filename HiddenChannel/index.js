(function(d,a,s,o,p,E){"use strict";const{View:m,Text:f,Pressable:T}=a.findByProps("Button","Text","View"),y=a.findByProps("extractTimestamp"),c=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:p.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:p.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function u(t){let{date:e}=t;return React.createElement(T,{style:c.dateContainer,onPress:function(){s.toasts.open({content:s.moment(e).toLocaleString(),source:E.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(e.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(f,{style:c.text},s.moment(e).fromNow()))}function _(t){let{channel:e}=t;return React.createElement(m,{style:c.container},React.createElement(f,{style:c.title},"This channel is hidden."),React.createElement(f,{style:c.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(u,{date:new Date(y.extractTimestamp(e.id))}),`

`,"Last message: ",e.lMsg?React.createElement(u,{date:new Date(y.extractTimestamp(e.lMsg))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(u,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let l=[];const C=a.findByProps("getChannelPermissions","can"),B=a.findByProps("transitionToGuild"),D=a.findByProps("stores","fetchMessages"),{ChannelTypes:g}=a.findByProps("ChannelTypes"),{getChannel:P}=a.findByProps("getChannel"),R=a.findByStoreName("ReadStateStore"),S=a.findByStoreName("ChannelStore"),x=[g.DM,g.GROUP_DM,g.GUILD_CATEGORY];function r(t){if(t==null||(typeof t=="string"&&(t=P(t)),!t||x.includes(t.type)))return!1;t.realCheck=!0;let e=!C.can(s.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,e}function M(){console.log("HiddenChannel loaded 4.6");const t=a.findByName("MessagesWrapperConnected",!1);console.log("Patch getForDebugging"),o.after("getForDebugging",R,function(e,n){return console.log("HiddenChannel: Patching channel overrides"),l.push(o.before("canBeUnread",n.__proto__,function(){if(r(P(this.channelId)))return!1})),n},!0),console.log("HiddenChannel: Patching channel overrides done"),R.getForDebugging(Object.keys(S.__getLocalVars().guildChannels)[0]),console.log("HiddenChannel: Patching channel overrides done 2"),l.push(o.after("can",C,function(e,n){let[i,h]=e;return!h?.realCheck&&i===s.constants.Permissions.VIEW_CHANNEL?!0:n})),l.push(o.instead("transitionToGuild",B,function(e,n){const[i,h]=e;!r(h)&&typeof n=="function"&&n(e)})),l.push(o.instead("fetchMessages",D,function(e,n){const[i]=e;!r(i)&&typeof n=="function"&&n(e)})),l.push(o.instead("default",t,function(e,n){const i=e[0]?.channel;return!r(i)&&typeof n=="function"?n(...e):s.React.createElement(_,{channel:i})}))}var N={onLoad:M,onUnload:function(){for(const t of l)t()}};return d.default=N,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
