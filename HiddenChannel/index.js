(function(f,i,s,c,h,P){"use strict";const{View:C,Text:u,Pressable:m}=i.findByProps("Button","Text","View"),M=i.findByProps("extractTimestamp"),o=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function g(e){let{date:t}=e;return React.createElement(m,{style:o.dateContainer,onPress:function(){s.toasts.open({content:s.moment(t).toLocaleString(),source:P.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(t.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(u,{style:o.text},s.moment(t).fromNow()))}function E(e){let{channel:t}=e;return React.createElement(C,{style:o.container},React.createElement(u,{style:o.title},"This channel is hidden."),React.createElement(u,{style:o.text},"Topic: ",t.topic||"No topic.",`

`,"Creation date: ",React.createElement(g,{date:new Date(M.extractTimestamp(t.id))}),`

`,"Last message: ",t.lMsg?React.createElement(g,{date:new Date(M.extractTimestamp(t.lMsg))}):"No messages.",`

`,"Last pin: ",t.lastPinTimestamp?React.createElement(g,{date:new Date(t.lastPinTimestamp)}):"No pins."))}let l=[];const R=i.findByProps("getChannelPermissions","can"),T=i.findByProps("transitionToGuild"),x=i.findByProps("stores","fetchMessages"),{ChannelTypes:p}=i.findByProps("ChannelTypes"),{getChannel:I}=i.findByProps("getChannel"),B=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function r(e){if(e==null||(typeof e=="string"&&(e=I(e)),!e||B.includes(e.type)))return!1;e.realCheck=!0;let t=!R.can(s.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,t}function y(e){r(e)&&((e.lMsg==null||e.lMsg!=e.lastMessageId)&&(e.lMsg=e.lastMessageId),e.lastMessageId=void 0)}function A(){console.log("HiddenChannel loaded 3.1");const e=i.findByName("MessagesWrapperConnected",!1);l.push(c.after("can",R,function(t,n){let[a,d]=t;return d.lastMessageId=void 0,n})),l.push(c.instead("transitionToGuild",T,function(t,n){const[a,d]=t;y(d),!r(d)&&typeof n=="function"&&n(t)})),l.push(c.instead("fetchMessages",x,function(t,n){const[a]=t;y(a),console.log("fetchMessages",a),console.log(t),!r(a)&&typeof n=="function"&&n(t)})),l.push(c.instead("default",e,function(t,n){const a=t[0]?.channel;return y(a),!r(a)&&typeof n=="function"?n(...t):s.React.createElement(E,{channel:a})}))}var D={onLoad:A,onUnload:function(){for(const e of l)e()}};return f.default=D,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
