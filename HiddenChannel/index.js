(function(u,i,s,l,h,C){"use strict";const{View:E,Text:g,Pressable:m}=i.findByProps("Button","Text","View"),M=i.findByProps("extractTimestamp"),d=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function p(t){let{date:e}=t;return React.createElement(m,{style:d.dateContainer,onPress:function(){s.toasts.open({content:s.moment(e).toLocaleString(),source:C.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(e.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(g,{style:d.text},s.moment(e).fromNow()))}function T(t){let{channel:e}=t;return React.createElement(E,{style:d.container},React.createElement(g,{style:d.title},"This channel is hidden."),React.createElement(g,{style:d.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(p,{date:new Date(M.extractTimestamp(e.id))}),`

`,"Last message: ",e.lMsg?React.createElement(p,{date:new Date(M.extractTimestamp(e.lMsg))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(p,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let o=[];const P=i.findByProps("getChannelPermissions","can"),I=i.findByProps("transitionToGuild"),x=i.findByProps("stores","fetchMessages"),{ChannelTypes:y}=i.findByProps("ChannelTypes"),{getChannel:B}=i.findByProps("getChannel"),R=i.findByStoreName("ReadStateStore"),N=[y.DM,y.GROUP_DM,y.GUILD_CATEGORY];function c(t){if(t==null||(typeof t=="string"&&(t=B(t)),!t||N.includes(t.type)))return!1;t.realCheck=!0;let e=!P.can(s.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,e}function f(t){c(t)&&((t.lMsg==null||t.lMsg!=t.lastMessageId)&&t.lastMessageId!=null&&(t.lMsg=t.lastMessageId),t.lastMessageId=void 0)}function S(){console.log("HiddenChannel loaded 3.7");const t=i.findByName("MessagesWrapperConnected",!1);o.push(l.instead("hasUnread",R,function(e,n){return c(e[0])?!1:n(e)})),o.push(l.instead("hasUnread",R,function(e,n){return c(e[0])?!1:n(e)})),o.push(l.after("can",P,function(e,n){let[a,r]=e;return!r?.realCheck&&a===s.constants.Permissions.VIEW_CHANNEL?(f(r),r.lastMessageId=void 0,!0):n})),o.push(l.instead("transitionToGuild",I,function(e,n){const[a,r]=e;f(r),!c(r)&&typeof n=="function"&&n(e)})),o.push(l.instead("fetchMessages",x,function(e,n){const[a]=e;f(a),console.log("fetchMessages",a),console.log(e),!c(a)&&typeof n=="function"&&n(e)})),o.push(l.instead("default",t,function(e,n){const a=e[0]?.channel;return f(a),!c(a)&&typeof n=="function"?n(...e):s.React.createElement(T,{channel:a})}))}var A={onLoad:S,onUnload:function(){for(const t of o)t()}};return u.default=A,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
